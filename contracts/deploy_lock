const { ethers, network } = require("hardhat");
const { loadFixture } = require("@nomicfoundation/hardhat-toolbox");

async function deployLockContract() {
  const ONE_YEAR_IN_SECS = 365 * 24 * 60 * 60;
  const ONE_GWEI = 1_000_000_000;
  const lockedAmount = ONE_GWEI;

  const [owner, otherAccount] = await ethers.getSigners();
  const Lock = await ethers.getContractFactory("Lock");
  const lock = await Lock.deploy((await time.latest()) + ONE_YEAR_IN_SECS, { value: lockedAmount });

  return { lock, owner, otherAccount };
}

async function main() {
  console.log("Deploying Lock contract...");
  const { lock, owner, otherAccount } = await deployLockContract();
  console.log("Lock contract deployed to:", lock.address);
  console.log("Owner address:", owner.address);
  console.log("Other account address:", otherAccount.address);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
